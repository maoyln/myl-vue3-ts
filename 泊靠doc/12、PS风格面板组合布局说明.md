# Photoshop 风格面板组合布局系统

## 项目概述

这是一套完整的 PS 风格面板组合布局组件系统，提供了6种常用的面板类型，支持折叠、关闭等交互功能。

## 文件结构

```
src/views/
├── Setting.vue                    # 主演示页面
└── components/                    # 面板组件目录
    ├── PanelContainer.vue         # 面板容器（核心组件）
    ├── Panel.vue                  # 单个面板包装器
    ├── panels/                    # 具体面板内容
    │   ├── ColorPanel.vue         # 颜色面板
    │   ├── LayerPanel.vue         # 图层面板
    │   ├── ChannelPanel.vue       # 通道面板
    │   ├── PropertyPanel.vue      # 属性面板
    │   ├── PatternPanel.vue       # 图案面板
    │   └── ThreeDPanel.vue        # 3D 面板
    └── README.md                  # 详细文档
```

## 核心功能

### 1. 颜色面板 (ColorPanel)
**功能特性：**
- 🎨 二维颜色选择器（饱和度 + 明度）
- 🌈 色相条选择
- 🔢 RGB 和 HSB 数值输入
- 🎯 当前/历史颜色对比显示
- 🎨 16 色快速色板

**适用场景：** 颜色选择、调色、颜色管理

### 2. 图层面板 (LayerPanel)
**功能特性：**
- 📚 图层列表展示
- 👁️ 显示/隐藏图层
- 🔒 锁定/解锁图层
- 🖼️ 图层缩略图预览
- 💫 不透明度显示
- ➕ 新建/删除/分组等操作
- ✨ 拖拽排序支持（可扩展）

**适用场景：** 图层管理、图层组织、图层编辑

### 3. 通道面板 (ChannelPanel)
**功能特性：**
- 📺 RGB 复合通道
- 🔴 红/绿/蓝单色通道
- ⚪ Alpha 透明通道
- 🖼️ 通道缩略图预览
- 👁️ 通道可见性控制
- ⭕ 载入为选区
- ➕ 新建/删除通道

**适用场景：** 通道编辑、选区操作、图像分析

### 4. 属性面板 (PropertyPanel)
**功能特性：**
- 🎚️ 不透明度滑块控制
- 🎚️ 填充滑块控制
- 🎨 10+ 种混合模式选择
- 📐 位置变换（X/Y 轴）
- 🔄 旋转角度控制
- ✨ 快捷效果按钮（投影、发光、描边等）

**适用场景：** 图层属性调整、效果添加、变换控制

### 5. 图案面板 (PatternPanel)
**功能特性：**
- 🎭 12+ 种预设图案
- 🔍 缩放控制（10%-200%）
- 🔄 角度旋转（0-360°）
- 🖼️ 图案预览网格
- 💾 新建/载入图案
- 🎨 渐变图案支持

**适用场景：** 图案填充、纹理应用、背景设计

### 6. 3D 面板 (ThreeDPanel)
**功能特性：**
- 👁️ 4种3D操作模式（查看/移动/旋转/缩放）
- 📦 3D 对象列表管理
- 📐 XYZ 轴位置控制
- 🔄 XYZ 轴旋转控制
- 💡 光照强度调节
- 🌑 阴影强度调节
- 🎬 渲染质量设置（低/中/高/超高）
- 🎥 渲染预览/导出

**适用场景：** 3D 编辑、三维变换、渲染设置

## 交互特性

### 面板级交互
1. **折叠/展开**
   - 点击面板头部即可折叠/展开
   - 平滑动画过渡
   - 节省屏幕空间

2. **关闭面板**
   - 支持动态关闭面板
   - 可通过配置控制是否可关闭

3. **菜单操作**
   - 每个面板右上角的 ⋯ 按钮
   - 可扩展更多操作

### 内容级交互
1. **滑块控制**
   - 实时数值反馈
   - 支持输入框直接输入
   - 范围限制

2. **列表选择**
   - 单选/多选支持
   - 高亮显示当前项
   - 悬停效果

3. **按钮操作**
   - 清晰的视觉反馈
   - 悬停/激活状态
   - 防误操作设计

## 使用方法

### 基础使用

```vue
<template>
  <PanelContainer :panels="panels" />
</template>

<script setup lang="ts">
import { ref } from 'vue';
import PanelContainer from './components/PanelContainer.vue';

const panels = ref([
  {
    id: 'color',
    title: '颜色',
    collapsed: false,    // 是否折叠
    closable: true,      // 是否可关闭
    visible: true,       // 是否可见
    type: 'color'        // 面板类型
  },
  // ... 更多面板
]);
</script>
```

### 高级配置

```javascript
// 动态控制面板
const showPanel = (panelId) => {
  const panel = panels.value.find(p => p.id === panelId);
  if (panel) panel.visible = true;
};

const hidePanel = (panelId) => {
  const panel = panels.value.find(p => p.id === panelId);
  if (panel) panel.visible = false;
};

const togglePanel = (panelId) => {
  const panel = panels.value.find(p => p.id === panelId);
  if (panel) panel.collapsed = !panel.collapsed;
};
```

## 样式定制

### 主题颜色

```css
/* 修改面板容器宽度 */
.panel-container {
  width: 320px; /* 默认 320px，可自定义 */
}

/* 修改配色方案 */
--panel-bg: #2c2c2c;           /* 面板背景色 */
--panel-header-bg: #323232;    /* 面板头部背景色 */
--panel-border: #404040;       /* 边框颜色 */
--panel-highlight: #4a90e2;    /* 高亮色 */
--panel-text: #cccccc;         /* 文字颜色 */
```

### 响应式适配

```css
/* 小屏幕适配 */
@media (max-width: 768px) {
  .panel-container {
    width: 280px;
  }
}

/* 大屏幕优化 */
@media (min-width: 1920px) {
  .panel-container {
    width: 380px;
  }
}
```

## 扩展开发

### 添加自定义面板

1. **创建面板组件**

```vue
<!-- components/panels/CustomPanel.vue -->
<template>
  <div class="custom-panel">
    <!-- 你的面板内容 -->
  </div>
</template>

<script setup lang="ts">
// 面板逻辑
</script>

<style scoped>
/* 面板样式 - 遵循统一风格 */
</style>
```

2. **注册面板**

```vue
<!-- PanelContainer.vue -->
<script setup lang="ts">
import CustomPanel from './panels/CustomPanel.vue';
</script>

<template>
  <template v-else-if="panel.type === 'custom'">
    <CustomPanel />
  </template>
</template>
```

3. **使用面板**

```javascript
const panels = ref([
  // ... 其他面板
  {
    id: 'custom',
    title: '自定义面板',
    collapsed: false,
    closable: true,
    visible: true,
    type: 'custom'
  }
]);
```

## 性能优化建议

### 1. 懒加载
对于内容复杂的面板，使用动态导入：

```javascript
const ColorPanel = defineAsyncComponent(
  () => import('./panels/ColorPanel.vue')
);
```

### 2. 虚拟滚动
图层列表过长时，使用虚拟滚动：

```bash
npm install vue-virtual-scroller
```

### 3. 防抖处理
滑块等高频交互添加防抖：

```javascript
import { useDebounceFn } from '@vueuse/core';

const updateValue = useDebounceFn((value) => {
  // 处理逻辑
}, 100);
```

## 设计原则

### 1. 一致性
- 统一的颜色方案
- 一致的间距和圆角
- 标准化的交互反馈

### 2. 可访问性
- 清晰的视觉层次
- 足够的点击区域
- 键盘导航支持

### 3. 性能
- 按需渲染
- 动画性能优化
- 内存管理

### 4. 可扩展性
- 组件化设计
- 插槽支持
- 配置化面板

## 技术栈

- **Vue 3** - 核心框架
- **TypeScript** - 类型支持
- **Composition API** - 逻辑复用
- **CSS3** - 样式和动画

## 浏览器兼容性

| 浏览器 | 最低版本 |
|--------|----------|
| Chrome | 90+ |
| Edge | 90+ |
| Firefox | 88+ |
| Safari | 14+ |

## 常见问题

### Q: 如何修改面板的默认宽度？
A: 在 `PanelContainer.vue` 中修改 `.panel-container` 的 `width` 属性。

### Q: 如何添加面板拖拽排序功能？
A: 可以集成 `vuedraggable` 库，参考文档中的扩展开发章节。

### Q: 面板内容太多，如何优化滚动性能？
A: 建议使用虚拟滚动库，如 `vue-virtual-scroller`。

### Q: 如何实现面板停靠/浮动功能？
A: 可以参考项目中的 `DockingFrame` 组件，实现更复杂的布局系统。

## 未来规划

- [ ] 面板拖拽排序
- [ ] 面板停靠/浮动模式
- [ ] 布局配置保存/加载
- [ ] 标签页模式支持
- [ ] 更多预设面板类型
- [ ] 主题切换支持
- [ ] 国际化支持

## 更新日志

### v1.0.0 (2026-01-20)
- ✅ 完成6种核心面板
- ✅ 实现折叠/展开功能
- ✅ 添加关闭面板功能
- ✅ 完善交互反馈
- ✅ 编写完整文档

## 参考资料

- [Adobe Photoshop 面板系统](https://helpx.adobe.com/photoshop/using/workspace-basics.html)
- [Vue 3 官方文档](https://vuejs.org/)
- [TypeScript 文档](https://www.typescriptlang.org/)

## 许可证

MIT License

---

**开发者：** myl-vue3-ts 项目组  
**创建时间：** 2026-01-20  
**文档版本：** 1.0.0
